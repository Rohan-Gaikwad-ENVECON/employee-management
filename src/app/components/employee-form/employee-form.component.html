<div class="form-container">
    <div class="form-card">
        <div class="form-header">
            <h1>{{ isEditMode ? 'Edit Employee' : 'Add New Employee' }}</h1>
            <p class="subtitle">{{ isEditMode ? 'Update employee information' : 'Fill in the details to create a new
                employee' }}</p>
        </div>

        <!-- Success Message -->
        <div *ngIf="successMessage" class="success-message">
            <span class="icon">✓</span>
            {{ successMessage }}
        </div>

        <!-- Error Message -->
        <div *ngIf="error" class="error-message">
            <span class="icon">⚠</span>
            {{ error }}
            <button class="btn-close" (click)="error = null">×</button>
        </div>

        <!-- Loading Overlay -->
        <div *ngIf="loading" class="loading-overlay">
            <div class="spinner"></div>
        </div>

        <form [formGroup]="employeeForm" (ngSubmit)="onSubmit()" class="employee-form">
            <!-- Employee Code -->
            <div class="form-group">
                <label for="employeeCode" class="form-label">
                    Employee Code <span class="required">*</span>
                </label>
                <input type="text" id="employeeCode" formControlName="employeeCode" class="form-input"
                    [class.error]="employeeForm.get('employeeCode')?.invalid && employeeForm.get('employeeCode')?.touched"
                    placeholder="e.g., EMP001" [readonly]="isEditMode" />
                <div *ngIf="employeeForm.get('employeeCode')?.invalid && employeeForm.get('employeeCode')?.touched"
                    class="error-text">
                    {{ getErrorMessage('employeeCode') }}
                </div>
                <small class="help-text" *ngIf="!isEditMode">Use uppercase letters and numbers only</small>
            </div>

            <!-- Full Name -->
            <div class="form-group">
                <label for="fullName" class="form-label">
                    Full Name <span class="required">*</span>
                </label>
                <input type="text" id="fullName" formControlName="fullName" class="form-input"
                    [class.error]="employeeForm.get('fullName')?.invalid && employeeForm.get('fullName')?.touched"
                    placeholder="Enter full name" />
                <div *ngIf="employeeForm.get('fullName')?.invalid && employeeForm.get('fullName')?.touched"
                    class="error-text">
                    {{ getErrorMessage('fullName') }}
                </div>
            </div>

            <!-- Email -->
            <div class="form-group">
                <label for="email" class="form-label">
                    Email Address <span class="required">*</span>
                </label>
                <input type="email" id="email" formControlName="email" class="form-input"
                    [class.error]="employeeForm.get('email')?.invalid && employeeForm.get('email')?.touched"
                    placeholder="employee@example.com" />
                <div *ngIf="employeeForm.get('email')?.invalid && employeeForm.get('email')?.touched"
                    class="error-text">
                    {{ getErrorMessage('email') }}
                </div>
            </div>

            <!-- Status (only in edit mode) -->
            <div class="form-group" *ngIf="isEditMode">
                <label class="checkbox-label">
                    <input type="checkbox" formControlName="isActive" class="checkbox-input" />
                    <span class="checkbox-custom"></span>
                    <span class="checkbox-text">Active Employee</span>
                </label>
                <small class="help-text">Inactive employees won't appear in active listings</small>
            </div>

            <!-- Form Actions -->
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" (click)="cancel()" [disabled]="loading">
                    Cancel
                </button>
                <button type="submit" class="btn btn-primary" [disabled]="loading || employeeForm.invalid">
                    <span *ngIf="!loading">{{ isEditMode ? 'Update Employee' : 'Create Employee' }}</span>
                    <span *ngIf="loading">Processing...</span>
                </button>
            </div>
        </form>
    </div>
</div>